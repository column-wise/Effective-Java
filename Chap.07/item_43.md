# item 43. ëžŒë‹¤ë³´ë‹¤ëŠ” ë©”ì„œë“œ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•˜ë¼

ëžŒë‹¤ëŠ” ìµëª… í´ëž˜ìŠ¤ì— ë¹„í•´ ê°„ê²°í•˜ë‹¤ëŠ” ì•„ì£¼ í° ìž¥ì ì„ ê°–ëŠ”ë‹¤.

ê·¸ëŸ°ë° ìžë°”ì—ëŠ” í•¨ìˆ˜ ê°ì²´ë¥¼ ì‹¬ì§€ì–´ ëžŒë‹¤ë³´ë‹¤ë„ ë” ê°„ê²°í•˜ê²Œ ë§Œë“œëŠ” ë°©ë²•ì´ ìžˆìœ¼ë‹ˆ,

ë°”ë¡œ **ë©”ì„œë“œ ì°¸ì¡°(Method Reference)** ë‹¤.

ë‹¤ìŒ ì½”ë“œë¥¼ ë³´ìž.

```java
map.merge(key, 1, (count, incr) -> count + incr);
```

ìžë°” 8ì— Mapì— ì¶”ê°€ëœ merge ë©”ì„œë“œë¥¼ ì‚¬ìš©í–ˆë‹¤.  
mergeëŠ” í‚¤, ê°’, í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ìœ¼ë©°, í‚¤ê°€ ë§µ ì•ˆì— ìžˆë‹¤ë©´ í‚¤, ê°’ ìŒì„ ì €ìž¥í•˜ê³ , ì—†ë‹¤ë©´ í‚¤, í•¨ìˆ˜ì˜ ê²°ê³¼ ê°’ì„ ì €ìž¥í•œë‹¤.

ðŸ” (count, incr) -> count + incr ì—ì„œì˜ ë‘ ì¸ìž  
count: ê¸°ì¡´ì— ìžˆë˜ ê°’ (map.get(key))  
incr: mergeì— ë„˜ê¸´ ê°’ (1)

ê¹”ë”í•´ë³´ì´ì§€ë§Œ ì•„ì§ ê±°ì¶”ìž¥ìŠ¤ëŸ½ë‹¤.

count, incrëŠ” í¬ê²Œ í•˜ëŠ” ì¼ ì—†ì´ ê³µê°„ì„ ì°¨ì§€í•œë‹¤..  
ë‹¨ìˆœ ë‘ ì¸ìˆ˜ì˜ í•©ì„ ë°˜í™˜

ìžë°” 8ë¶€í„° Integer í´ëž˜ìŠ¤ì— ì´ ëžŒë‹¤ì™€ ê°™ì€ ê¸°ëŠ¥ì„ í•˜ëŠ” sumì´ ì¶”ê°€ë˜ì–´

```java
map.merge(key, 1, Integer::sum);
```

ë³´ê¸° ì¢‹ë‹¤.

ë§¤ê°œë³€ìˆ˜ ìˆ˜ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ë©”ì„œë“œ ì°¸ì¡°ë¡œ ì œê±°í•  ìˆ˜ ìžˆëŠ” ì½”ë“œì–‘ë„ ëŠ˜ì–´ë‚œë‹¤.

í•˜ì§€ë§Œ ë©”ì„œë“œ ì°¸ì¡°ê°€ í•­ìƒ ëžŒë‹¤ë³´ë‹¤ ë‚˜ì€ ê²ƒì€ ì•„ë‹ˆë‹¤.

## ëžŒë‹¤ê°€ ë” ë‚˜ì€ ê²½ìš°

1. ì–´ë–¤ ëžŒë‹¤ì—ì„œëŠ” ë§¤ê°œë³€ìˆ˜ì˜ ì´ë¦„ ìžì²´ê°€ ížŒíŠ¸ê°€ ë˜ë¯€ë¡œ ë©”ì„œë“œ ì°¸ì¡°ë³´ë‹¤ ê¸¸ì´ëŠ” ê¸¸ì§€ë§Œ ì½ê¸° ì‰½ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš¸ ìˆ˜ë„ ìžˆë‹¤.

   ```java
   list.forEach(user -> logger.info("Processing user: {}", user.getName()));
   ```

   ```java
   list.forEach(logger::info); // âŒ ì˜ë¯¸ ì „ë‹¬ ë¶€ì¡±
   ```

   ë¬´ì—‡ì„ ë¡œê·¸ì— ì°ëŠ”ì§€, ë¬¸ë§¥ìƒ ì–´ë–¤ ë¡œê¹…ì¸ì§€ ì•Œê¸° ì–´ë µë‹¤.

2. ëžŒë‹¤ê°€ ë” ì§§ì€ ê²½ìš°(ë³´í†µ ë©”ì„œë“œì™€ ëžŒë‹¤ê°€ ê°™ì€ í´ëž˜ìŠ¤ ì•ˆì— ìžˆëŠ” ê²½ìš°)

   ```java
   public class GoshThisClassNameIsHumongous {

       public void start() {
           service.execute(GoshThisClassNameIsHumongous::action); // ë©”ì„œë“œ ì°¸ì¡°
           service.execute(() -> action());                       // ëžŒë‹¤
       }

       public void action() {
           System.out.println("ì‹¤í–‰ ì¤‘...");
       }
   }
   ```

   ```java
   service.execute(GoshThisClassNameIsHumongous::action);
   ```

   ```java
   service.execute(() -> action());
   ```

   ì´ëŸ° ê²½ìš°ì—ëŠ” ëžŒë‹¤ ìª½ì´ ë” ì§§ê³  ëª…í™•í•˜ë‹¤.

## ë©”ì„œë“œ ì°¸ì¡°ì˜ ìœ í˜•

1. ì •ì  ë©”ì„œë“œë¥¼ ê°€ë¦¬í‚¤ëŠ” ë©”ì„œë“œ ì°¸ì¡°

2. ìˆ˜ì‹  ê°ì²´(Receiving Object; ì°¸ì¡° ëŒ€ìƒ ì¸ìŠ¤í„´ìŠ¤)ë¥¼ íŠ¹ì •í•˜ëŠ” í•œì •ì (bound) ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ì°¸ì¡°
   í•¨ìˆ˜ ê°ì²´ê°€ ë°›ëŠ” ì¸ìˆ˜ì™€ ì°¸ì¡°ë˜ëŠ” ë©”ì„œë“œê°€ ë°›ëŠ” ì¸ìˆ˜ê°€ ë˜‘ê°™ë‹¤

3. ìˆ˜ì‹  ê°ì²´ë¥¼ íŠ¹ì •í•˜ì§€ ì•ŠëŠ” ë¹„í•œì •ì (unbound) ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ì°¸ì¡°  
   í•¨ìˆ˜ ê°ì²´ë¥¼ ì ìš©í•˜ëŠ” ì‹œì ì— ìˆ˜ì‹  ê°ì²´ë¥¼ ì•Œë ¤ì¤€ë‹¤.  
   ì´ë¥¼ ìœ„í•´ ìˆ˜ì‹  ê°ì²´ ì „ë‹¬ìš© ë§¤ê°œë³€ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ ëª©ë¡ì˜ ì²« ë²ˆì§¸ë¡œ ì¶”ê°€ëœë‹¤.

4. í´ëž˜ìŠ¤ ìƒì„±ìž

5. ë°°ì—´ ìƒì„±ìž

| ë©”ì†Œë“œ ì°¸ì¡° íƒ€ìž…  | Example                  | ê°™ì€ ê¸°ëŠ¥ì˜ ëžŒë‹¤                                     |
| ----------------- | ------------------------ | ---------------------------------------------------- |
| Static            | `Integer::parseInt`      | `str -> Integer.parseInt(str)`                       |
| Bound             | `Instant.now()::isAfter` | `Instant then = Instant.now(); t -> then.isAfter(t)` |
| Unbound           | `String::toLowerCase`    | `str -> str.toLowerCase()`                           |
| Class Constructor | `TreeMap<K,V>::new`      | `() -> new TreeMap<K,V>()`                           |
| Array Constructor | `int[]::new`             | `len -> new int[len]`                                |
